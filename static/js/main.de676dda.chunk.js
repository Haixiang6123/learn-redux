(this["webpackJsonplearn-redux"]=this["webpackJsonplearn-redux"]||[]).push([[0],{159:function(t,e,n){t.exports=n(1754)},1753:function(t,e,n){},1754:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),u=n(1756),i=n(22),s=n(41),l=n(37),d=n(75),f=(n(169),n(38)),p=n(40),m={ids:[],entities:{}},b=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=arguments.length>1?arguments[1]:void 0,a=(t={},Object(f.a)(t,"setTodos",(function(t,e){var n=e.payload,a=Object(p.a)({},(function(t){n.forEach((function(e){t[e.id]=e}))}));return{ids:n.map((function(t){return t.id})),entities:a}})),Object(f.a)(t,"addTodo",(function(t,e){return Object(p.a)(t,(function(t){var n=e.payload;t.ids.push(n.id),t.entities[n.id]=n}))})),Object(f.a)(t,"removeTodo",(function(t,e){return Object(p.a)(t,(function(t){var n=e.payload;t.ids=t.ids.filter((function(t){return t!==n})),delete t.entities[n]}))})),Object(f.a)(t,"updateTodo",(function(t,e){return Object(p.a)(t,(function(t){var n=e.payload,a=n.id,r=n.text;t.entities[a].text=r}))})),Object(f.a)(t,"toggleTodo",(function(t,e){return Object(p.a)(t,(function(t){var n=e.payload,a=t.entities[n];a.state="todo"===a.state?"done":"todo"}))})),t),r=a[n.type];return r?r(e,n):e},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1?arguments[1]:void 0,n=Object(f.a)({},"setFilter",(function(t,e){return e.payload})),a=n[e.type];return a?a(t,e):t},O=n(49),j={status:!1,tip:""},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=arguments.length>1?arguments[1]:void 0,n=Object(f.a)({},"setLoading",(function(t,e){return Object(O.a)(Object(O.a)({},t),e.payload)})),a=n[e.type];return a?a(t,e):t},g=Object(l.combineReducers)({todos:b,filter:v,loading:h}),E=Object(l.applyMiddleware)(d.a),x=Object(l.createStore)(g,E),y=n(15),w=n.n(y),k=n(23),T=n(51),C=n(1758),N=n(1757),S=n(141),B=n(1755),I=function(t){return new Promise((function(e){return setTimeout(e,t)}))};function R(){return(R=Object(k.a)(w.a.mark((function t(e,n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(1500);case 2:return t.abrupt("return",n());case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var F=function(t,e){return R.apply(this,arguments)},P=function(t){return{type:"setLoading",payload:t}},z=[{id:"1",text:"\u62bd\u70df",state:"done"},{id:"2",text:"\u559d\u9152",state:"todo"},{id:"3",text:"\u70eb\u5934",state:"todo"}],D=function(t,e){return function(){var n=Object(k.a)(w.a.mark((function n(a){var r;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(P({status:!0,tip:"\u66f4\u65b0\u4e2d..."})),n.next=3,F("/updateTodo",(function(){return{id:t,text:e}}));case 3:r=n.sent,a({type:"updateTodo",payload:r}),a(P({status:!1,tip:""}));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},L=function(t){var e=Object.values(t.todos.entities);return"all"===t.filter?e:e.filter((function(e){return e.state===t.filter}))},A=function(t){return Object.values(t.todos.entities).filter((function(t){return"todo"===t.state})).length},G=function(t){return t.loading},J=n(1759),V=n(5),W=n.n(V),K=n(91),M=a.memo((function(t){var e=t.todo,n=t.onToggle,r=t.onRemove,o=t.onSave,c=Object(a.useState)(!1),u=Object(T.a)(c,2),i=u[0],s=u[1],l=Object(a.useState)(e.text),d=Object(T.a)(l,2),f=d[0],p=d[1],m=function(){var t=Object(k.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(e.id,f);case 2:s(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=a.createElement(N.a,{value:f,onChange:function(t){return p(t.target.value)},autoFocus:!0,onPressEnter:m,onBlur:function(){return s(!1)}}),v=a.createElement("span",{className:W()("todo-text",{done:"done"===e.state})},e.text);return a.createElement(B.b.Item,{className:"todo-item",onDoubleClick:function(){return s(!0)}},a.createElement("span",{className:"todo-left"},a.createElement(J.a,{className:"todo-check",checked:"done"===e.state,onChange:function(){return n(e.id)}}),i?b:v),a.createElement("span",{className:"todo-right",onClick:function(){return r(e.id)}},a.createElement(K.CloseOutlined,null)))})),$=function(){var t=Object(s.b)(),e=Object(s.c)(L),n=Object(s.c)(A),r=Object(s.c)(G),o=Object(a.useState)(""),c=Object(T.a)(o,2),u=c[0],i=c[1];Object(a.useEffect)((function(){t(function(){var t=Object(k.a)(w.a.mark((function t(e){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(P({status:!0,tip:"\u52a0\u8f7d\u4e2d..."})),t.next=3,F("/fetchTodos",(function(){return z}));case 3:n=t.sent,e({type:"setTodos",payload:n}),e(P({status:!1,tip:""}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]);var l=Object(a.useCallback)((function(e){t(function(t){return function(){var e=Object(k.a)(w.a.mark((function e(n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(P({status:!0,tip:"\u66f4\u65b0\u72b6\u6001..."})),e.next=3,F("/toggleTodo",(function(){return t}));case 3:a=e.sent,n({type:"toggleTodo",payload:a}),n(P({status:!1,tip:""}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))}),[t]),d=Object(a.useCallback)((function(e){t(function(t){return function(){var e=Object(k.a)(w.a.mark((function e(n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(P({status:!0,tip:"\u79fb\u9664\u4e2d..."})),e.next=3,F("/removeTodo",(function(){return t}));case 3:a=e.sent,n({type:"removeTodo",payload:a}),n(P({status:!1,tip:""}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))}),[t]),f=Object(a.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(n,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(D(n,a));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),p=function(e){t(function(t){return function(){var e=Object(k.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(P({status:!0,tip:"\u52a0\u8f7d\u4e2d..."})),n({type:"setFilter",payload:t}),n(P({status:!1,tip:""}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))},m=a.createElement("div",{className:"footer"},n>0&&a.createElement("span",{className:"todo-needed"},"\u8fd8\u5269",n,"\u9879 ",a.createElement("span",{role:"img","aria-label":"Clap"},"\ud83c\udf89")),a.createElement(C.a.Group,{onChange:function(t){return p(t.target.value)},size:"small",defaultValue:"all",buttonStyle:"solid"},a.createElement(C.a.Button,{className:"filter-item",value:"all"},"\u5168\u90e8"),a.createElement(C.a.Button,{className:"filter-item",value:"done"},"\u5df2\u5b8c\u6210"),a.createElement(C.a.Button,{className:"filter-item",value:"todo"},"\u5f85\u5b8c\u6210")));return a.createElement("div",{className:"app"},a.createElement("h1",null,"react-redux todos"),a.createElement(N.a,{size:"large",placeholder:"\u4eca\u5929\u60f3\u5e72\u561b",value:u,onChange:function(t){return i(t.target.value)},onPressEnter:function(){var e;t((e={text:u,state:"todo"},function(){var t=Object(k.a)(w.a.mark((function t(n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(P({status:!0,tip:"\u6dfb\u52a0\u4e2d..."})),t.next=3,F("/addTodo",(function(){return Object(O.a)({id:(new Date).toISOString()},e)}));case 3:a=t.sent,n({type:"addTodo",payload:a}),n(P({status:!1,tip:""}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),i("")}}),a.createElement(S.a,{spinning:r.status,tip:r.tip},a.createElement(B.b,{className:"todo-list",footer:m,bordered:!0,dataSource:e,renderItem:function(t){return a.createElement(M,{onRemove:d,onToggle:l,onSave:f,todo:t})}})))},q=function(){return a.createElement(s.a,{store:x},a.createElement($,null))},H=n(39),Q=Object(H.d)({name:"filter",initialState:"all",reducers:Object(f.a)({},"setFilter",(function(t,e){return e.payload}))}),U=Object(H.d)({name:"loading",initialState:{status:!1,tip:""},reducers:Object(f.a)({},"setLoading",(function(t,e){return Object(O.a)(Object(O.a)({},t),e.payload)}))}),X=U.actions.setLoading,Y=[{id:"1",text:"\u62bd\u70df",state:"done"},{id:"2",text:"\u559d\u9152",state:"todo"},{id:"3",text:"\u70eb\u5934",state:"todo"}],Z=Object(H.b)("todos/fetchTodos",function(){var t=Object(k.a)(w.a.mark((function t(e,n){var a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.dispatch)(X({status:!0,tip:"\u52a0\u8f7d\u4e2d..."})),t.next=4,F("/fetchTodos",(function(){return Y}));case 4:return r=t.sent,a(X({status:!1,tip:""})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),_=Object(H.b)("todos/addTodo",function(){var t=Object(k.a)(w.a.mark((function t(e,n){var a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.dispatch)(X({status:!0,tip:"\u6dfb\u52a0\u4e2d..."})),t.next=4,F("/addTodo",(function(){return Object(O.a)({id:(new Date).toISOString()},e)}));case 4:return r=t.sent,a(X({status:!1,tip:""})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),tt=Object(H.b)("todos/removeTodo",function(){var t=Object(k.a)(w.a.mark((function t(e,n){var a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.dispatch)(X({status:!0,tip:"\u79fb\u9664\u4e2d..."})),t.next=4,F("/removeTodo",(function(){return e}));case 4:return r=t.sent,a(X({status:!1,tip:""})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),et=Object(H.b)("todos/updateTodo",function(){var t=Object(k.a)(w.a.mark((function t(e,n){var a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.dispatch)(X({status:!0,tip:"\u66f4\u65b0\u4e2d..."})),t.next=4,F("/updateTodo",(function(){return e}));case 4:return r=t.sent,a(X({status:!1,tip:""})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),nt=Object(H.b)("todos/toggleTodo",function(){var t=Object(k.a)(w.a.mark((function t(e,n){var a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.dispatch)(X({status:!0,tip:"\u66f4\u65b0\u72b6\u6001..."})),t.next=4,F("/toggleTodo",(function(){return e}));case 4:return r=t.sent,a(X({status:!1,tip:""})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),at=Object(H.c)({selectId:function(t){return t.id},sortComparer:function(t,e){return t.id.localeCompare(e.id)}}),rt=Object(H.d)({name:"todos",initialState:at.getInitialState(),reducers:{},extraReducers:function(t){t.addCase(Z.fulfilled,(function(t,e){at.setAll(t,e.payload)})),t.addCase(_.fulfilled,(function(t,e){at.upsertOne(t,e.payload)})),t.addCase(tt.fulfilled,(function(t,e){at.removeOne(t,e.payload)})),t.addCase(et.fulfilled,(function(t,e){at.updateOne(t,e.payload)})),t.addCase(nt.fulfilled,(function(t,e){var n=e.payload,a=t.entities[n];a.state="todo"===a.state?"done":"todo"}))}}),ot=Object(l.combineReducers)({todos:rt.reducer,filter:Q.reducer,loading:U.reducer}),ct=Object(H.a)({reducer:ot,devTools:!0}),ut=n(47),it=function(t){return Object.values(t.todos.entities)},st=Object(ut.a)(it,(function(t){return t.filter}),(function(t,e){return"all"===e?t:t.filter((function(t){return t.state===e}))})),lt=Object(ut.a)(it,(function(t){return t.filter((function(t){return"todo"===t.state})).length})),dt=function(t){return t.loading},ft=a.memo((function(t){var e=t.todo,n=t.onToggle,r=t.onRemove,o=t.onSave,c=Object(a.useState)(!1),u=Object(T.a)(c,2),i=u[0],s=u[1],l=Object(a.useState)(e.text),d=Object(T.a)(l,2),f=d[0],p=d[1],m=function(){var t=Object(k.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(e.id,f,e.state);case 2:s(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=a.createElement(N.a,{value:f,onChange:function(t){return p(t.target.value)},autoFocus:!0,onPressEnter:m,onBlur:function(){return s(!1)}}),v=a.createElement("span",{className:W()("todo-text",{done:"done"===e.state})},e.text);return a.createElement(B.b.Item,{className:"todo-item",onDoubleClick:function(){return s(!0)}},a.createElement("span",{className:"todo-left"},a.createElement(J.a,{className:"todo-check",checked:"done"===e.state,onChange:function(){return n(e.id)}}),i?b:v),a.createElement("span",{className:"todo-right",onClick:function(){return r(e.id)}},a.createElement(K.CloseOutlined,null)))})),pt=Q.actions.setFilter,mt=function(){var t=Object(s.b)(),e=Object(s.c)(st),n=Object(s.c)(lt),r=Object(s.c)(dt),o=Object(a.useState)(""),c=Object(T.a)(o,2),u=c[0],i=c[1];Object(a.useEffect)((function(){t(Z())}),[t]);var l=Object(a.useCallback)((function(e){t(nt(e))}),[t]),d=Object(a.useCallback)((function(e){t(tt(e))}),[t]),f=Object(a.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(n,a,r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(et({id:n,changes:{text:a,state:r}}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[t]),p=a.createElement("div",{className:"footer"},n>0&&a.createElement("span",{className:"todo-needed"},"\u8fd8\u5269",n,"\u9879 ",a.createElement("span",{role:"img","aria-label":"Clap"},"\ud83c\udf89")),a.createElement(C.a.Group,{onChange:function(e){return n=e.target.value,void t(pt(n));var n},size:"small",defaultValue:"all",buttonStyle:"solid"},a.createElement(C.a.Button,{className:"filter-item",value:"all"},"\u5168\u90e8"),a.createElement(C.a.Button,{className:"filter-item",value:"done"},"\u5df2\u5b8c\u6210"),a.createElement(C.a.Button,{className:"filter-item",value:"todo"},"\u5f85\u5b8c\u6210")));return a.createElement("div",{className:"app"},a.createElement("h1",null,"redux-toolkit todos"),a.createElement(N.a,{size:"large",placeholder:"\u4eca\u5929\u60f3\u5e72\u561b",value:u,onChange:function(t){return i(t.target.value)},onPressEnter:function(){t(_({text:u,state:"todo"})),i("")}}),a.createElement(S.a,{spinning:r.status,tip:r.tip},a.createElement(B.b,{className:"todo-list",footer:p,bordered:!0,dataSource:e,renderItem:function(t){return a.createElement(ft,{onRemove:d,onToggle:l,onSave:f,todo:t})}})))},bt=function(){return a.createElement(s.a,{store:ct},a.createElement(mt,null))},vt=n(155),Ot=(n(1752),n(1753),u.a.TabPane);var jt=function(){return r.a.createElement(i.a,{locale:vt.a},r.a.createElement(u.a,{defaultActiveKey:"2",centered:!0},r.a.createElement(Ot,{tab:"react-redux",key:"1"},r.a.createElement(q,null)),r.a.createElement(Ot,{tab:"redux-toolkit",key:"2"},r.a.createElement(bt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(jt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[159,1,2]]]);
//# sourceMappingURL=main.de676dda.chunk.js.map